name: Secrets Scanning

on:
  push:
    branches: [ "*" ]
  schedule:
    - cron: '*/5 * * * *'
  workflow_dispatch:

env:
  SERVICE_NAME: "codeql"

jobs:
  talisman_checks:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout local repository
        uses: actions/checkout@v2
#        with:
#          fetch-depth: 5
#          path: ${{ github.workspace }}/${{ env.SERVICE_NAME }}
      - name: Checkout cicd resources
        uses: actions/checkout@v2
#        with:
#          repository: JhansiLakkaraju1848/codeql
#          path: ${{ github.workspace }}/codeql
#          ssh-key: ${{ secrets.SSH_PRIVATE_KEY }}
      - name: Install talisman and add to PATH
        run: |
          sh bin/install-talisman.sh
          echo "$GITHUB_WORKSPACE/codeql" >> $GITHUB_PATH
#        working-directory: ${{ github.workspace }}/aquanar_starter/
      - name: Talisman Verify
        run: $GITHUB_WORKSPACE/codeql/bin/talisman-verify-repo.sh
#        working-directory: ${{ github.workspace }}/${{ env.SERVICE_NAME }}/